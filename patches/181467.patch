From 38c9f6428b87a75ff70ba886c2a559a94095c8d5 Mon Sep 17 00:00:00 2001
From: Charlotte Van Petegem <charlotte@vanpetegem.me>
Date: Thu, 14 Jul 2022 13:10:59 +0200
Subject: [PATCH] xapian: 1.4.19 -> 1.4.20

---
 pkgs/development/libraries/xapian/default.nix             | 2 +-
 pkgs/development/libraries/xapian/tools/omega/default.nix | 6 +++---
 pkgs/development/python-modules/xapian/default.nix        | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/pkgs/development/libraries/xapian/default.nix b/pkgs/development/libraries/xapian/default.nix
index 4d23752b2420c..b85086374dc1f 100644
--- a/pkgs/development/libraries/xapian/default.nix
+++ b/pkgs/development/libraries/xapian/default.nix
@@ -38,5 +38,5 @@ let
     };
   };
 in {
-  xapian_1_4 = generic "1.4.19" "sha256-H8pI/KbMNSbMS6k90ZT+nBMmhXt47c+zfmjQhtcUqcM=";
+  xapian_1_4 = generic "1.4.20" "zivl7/cgdcgQbANA5wsQk9vOviq0LcHBvgjdOtQZRC0=";
 }
diff --git a/pkgs/development/libraries/xapian/tools/omega/default.nix b/pkgs/development/libraries/xapian/tools/omega/default.nix
index 79e5786f0488c..eeea4a7cc9e3f 100644
--- a/pkgs/development/libraries/xapian/tools/omega/default.nix
+++ b/pkgs/development/libraries/xapian/tools/omega/default.nix
@@ -1,4 +1,4 @@
-{ lib, stdenv, fetchurl, pkg-config, xapian, perl, pcre, zlib, libmagic }:
+{ lib, stdenv, fetchurl, pkg-config, xapian, perl, pcre2, zlib, libmagic }:
 
 stdenv.mkDerivation rec {
   pname = "xapian-omega";
@@ -6,10 +6,10 @@ stdenv.mkDerivation rec {
 
   src = fetchurl {
     url = "https://oligarchy.co.uk/xapian/${version}/xapian-omega-${version}.tar.xz";
-    sha256 = "0zji8ckp4h5xdy2wbir3lvk680w1g1l4h5swmaxsx7ah12lkrjcr";
+    sha256 = "Cf19bGCzlP0A2EcAZJlpofzDqiuIuyxsoiD9+o0liB8=";
   };
 
-  buildInputs = [ xapian perl pcre zlib libmagic ];
+  buildInputs = [ xapian perl pcre2 zlib libmagic ];
   nativeBuildInputs = [ pkg-config ];
 
   meta = with lib; {
diff --git a/pkgs/development/python-modules/xapian/default.nix b/pkgs/development/python-modules/xapian/default.nix
index a71ade1b41b78..cb0d788e84325 100644
--- a/pkgs/development/python-modules/xapian/default.nix
+++ b/pkgs/development/python-modules/xapian/default.nix
@@ -13,7 +13,7 @@ buildPythonPackage rec {
 
   src = fetchurl {
     url = "https://oligarchy.co.uk/xapian/${version}/xapian-bindings-${version}.tar.xz";
-    sha256 = "0j9awiiw9zf97r60m848absq43k37gghpyw7acxqjazfzd71fxvm";
+    sha256 = "eGzCjQVmCyJ5VEE68OL2bk6tKgbT322rrqSERUtgHvU=";
   };
 
   configureFlags = [
