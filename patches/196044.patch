From fded9bcc63de1243c049dcecb8a4bbddf5b4fdf4 Mon Sep 17 00:00:00 2001
From: Charlotte Van Petegem <charlotte@vanpetegem.me>
Date: Fri, 14 Oct 2022 21:47:08 +0200
Subject: [PATCH] matrix-sdk-crypto-nodejs: fix build

---
 .../libraries/matrix-sdk-crypto-nodejs/default.nix           | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/pkgs/development/libraries/matrix-sdk-crypto-nodejs/default.nix b/pkgs/development/libraries/matrix-sdk-crypto-nodejs/default.nix
index afb52ddd6b3c8..cce2c24f184df 100644
--- a/pkgs/development/libraries/matrix-sdk-crypto-nodejs/default.nix
+++ b/pkgs/development/libraries/matrix-sdk-crypto-nodejs/default.nix
@@ -23,10 +23,6 @@ stdenv.mkDerivation rec {
     hash = "sha256-G2Um7vHinOuOx9U2BH14LAx+s/0Sxtlc9Nz6nPJfmU8=";
   };
 
-  postPatch = ''
-    cd bindings/${pname}
-  '';
-
   nativeBuildInputs = [
     rustPlatform.cargoSetupHook
     rustPlatform.rust.cargo
@@ -40,6 +36,7 @@ stdenv.mkDerivation rec {
   buildPhase = ''
     runHook preBuild
 
+    cd bindings/${pname}
     npm run release-build --offline
 
     runHook postBuild
