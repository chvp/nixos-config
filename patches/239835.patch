diff --git a/pkgs/development/libraries/libnatpmp/default.nix b/pkgs/development/libraries/libnatpmp/default.nix
index 8841de12f9a4b..b41b086bf1c39 100644
--- a/pkgs/development/libraries/libnatpmp/default.nix
+++ b/pkgs/development/libraries/libnatpmp/default.nix
@@ -9,6 +9,7 @@ stdenv.mkDerivation rec {
     hash = "sha256-BoTtLIQGQ351GaG9IOqDeA24cbOjpddSMRuj6Inb/HA=";
   };
 
+  patches = [ ./headers.patch ];
   makeFlags = [
     "INSTALLPREFIX=$(out)"
     "CC:=$(CC)"
diff --git a/pkgs/development/libraries/libnatpmp/headers.patch b/pkgs/development/libraries/libnatpmp/headers.patch
new file mode 100644
index 0000000000000..1a47bd5146707
--- /dev/null
+++ b/pkgs/development/libraries/libnatpmp/headers.patch
@@ -0,0 +1,12 @@
+diff a/Makefile b/Makefile
+--- a/Makefile
++++ b/Makefile
+@@ -56,7 +56,7 @@ else
+ endif
+ endif
+ 
+-HEADERS = natpmp.h
++HEADERS = natpmp.h natpmp_declspec.h
+ 
+ EXECUTABLES = testgetgateway natpmpc-shared natpmpc-static
+ 
